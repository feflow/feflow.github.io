(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{286:function(t,e,s){"use strict";s.r(e);var a=s(0),n=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),s("p",[t._v("It's very easy. We make use of the power of open source. All we need is just a Yeoman generator. If you know how to develop Yeoman generator, then you can basically develop your own generator. If you don't, then we will introdcuce it in the next part.")]),t._v(" "),t._m(2),t._v(" "),s("p",[t._v("If you have already know how to develop a Yeoman generator, you can just skip this part. However, here are some tips:")]),t._v(" "),t._m(3),t._v(" "),s("p",[t._v("If you don't have experience in developing Yeoman generators, don't worry. We will give you a guide. More details can be found in "),s("a",{attrs:{href:"https://yeoman.io/authoring/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Yeoman Docs"),s("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),s("p",[t._v("By this we use Yeoman and their generator to create our own generator quickly. This is not neccessary but we'd better follow these steps. Or we can not continue to next part.")]),t._v(" "),t._m(7),t._v(" "),s("p",[t._v("Now, we just need one command to generate scaffold：")]),t._v(" "),t._m(8),t._m(9),t._v(" "),t._m(10),t._v(" "),s("p",[t._v("Let us look through the structure of directory we generated:")]),t._v(" "),t._m(11),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),s("p",[t._v("For personally use or team without their own scaffold, the first mission should be planning your own scaffold. In our example, we will create a very simple and React supported project scaffold.")]),t._v(" "),t._m(16),t._v(" "),s("p",[t._v("The main structure of our scaffold is as below:")]),t._v(" "),t._m(17),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._m(23),t._v(" "),t._m(24),t._v(" "),s("p",[t._v("With project scaffold, we still need code to describe how to create a project. The simplest logic is just copy a scaffold to current directory. Of course, advanced generator has these procedures:")]),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._m(28),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/feflow/generator-feflow-example/blob/master/generators/app/index.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("Read this"),s("OutboundLink")],1),t._v(" for the generator example.")]),t._v(" "),t._m(29),t._v(" "),s("p",[t._v("Now your generator is ready. Let us have a try. Firstly we install it in Feflow main directory:")]),t._v(" "),t._m(30),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),s("p",[t._v("The example above is designed as simple as possible. It can not support production environment. If you want to know about more advanced solution, we suggest you to visit our's solution:")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/feflow/generator-ivweb",target:"_blank",rel:"noopener noreferrer"}},[t._v("generator-ivweb"),s("OutboundLink")],1)])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"custom-generators"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#custom-generators","aria-hidden":"true"}},[this._v("#")]),this._v(" Custom Generators")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("When you run "),e("code",[this._v("feflow init")]),this._v(", Feflow's internal plugin will use a scaffold to create a project. But how can we create our own scaffold?")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"develop-a-yeoman-generator"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#develop-a-yeoman-generator","aria-hidden":"true"}},[this._v("#")]),this._v(" Develop a Yeoman generator")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("The "),e("code",[this._v("description")]),this._v(" field in your "),e("code",[this._v("package.json")]),this._v(" should not be empty. Because Feflow need this field to tell users when they choose generators.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"prepare"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#prepare","aria-hidden":"true"}},[this._v("#")]),this._v(" Prepare")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Install "),e("code",[this._v("yo")]),this._v(" and "),e("code",[this._v("generator-generator")]),this._v(" globally.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("npm install yo generator-generator -g\n# or yarn global add yo generator-generator\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"generate-scaffold"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#generate-scaffold","aria-hidden":"true"}},[this._v("#")]),this._v(" Generate scaffold")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("yo generator\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Attention again, "),e("strong",[this._v("The "),e("code",[this._v("Description")]),this._v(" in questions should be filled correctly")]),this._v(", Feflow will use it to provide introduction for generator.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("You might notice that, "),e("strong",[this._v("The name of project generated is begin with "),e("code",[this._v("generator-")])]),this._v(", If you manually create a scaffold, this is neccessary, too.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("├── generators/\n|   └── app/\n│       ├── index.js\n│       └── templates/\n│           └── dummyfile.txt\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("generators/app/index.js")]),this._v(" is the logic of generating project. And "),e("code",[this._v("generators/templates/")]),this._v(" directory is just a scaffold of project. Then we can just focus on these two places to custom our generators.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"create-our-own-generator"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-our-own-generator","aria-hidden":"true"}},[this._v("#")]),this._v(" Create our own generator")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"project-scaffold"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#project-scaffold","aria-hidden":"true"}},[this._v("#")]),this._v(" Project scaffold")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("For teamwork, we usually have our rules for project structure, or we use others' project scaffold. Then it's very easy to transform them to Yeoman generator scaffold. We can just find a project or copy the project scaffold to "),e("code",[this._v("generators/templates/")]),this._v(". But we need more work for Feflow.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"create-scaffold"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-scaffold","aria-hidden":"true"}},[this._v("#")]),this._v(" Create scaffold")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("|- src # Demo source code.\n    |- index.html # HTML entry\n    |- index.js # JS entry, Webpack build entry\n|- _babelrc # process JSX config\n|- .feflowrc.js # necessary\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("If we use files like "),s("code",[t._v(".babelrc")]),t._v(", we'd better transform "),s("code",[t._v(".")]),t._v(" to "),s("code",[t._v("_")]),t._v(" as "),s("code",[t._v("_babelrc")]),t._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("And, "),e("code",[this._v(".feflowrrc.js")]),this._v(" is the neccessary configure file. Feflow will read the configuration and build source code in src directory.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"dynamic-scaffold"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dynamic-scaffold","aria-hidden":"true"}},[this._v("#")]),this._v(" Dynamic scaffold")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If you want to add some dynamic content to your generator, such as asking users for project name to fill up ypur project. You can write thing like below in your "),e("code",[this._v("package.json")]),this._v(":")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<%= name %>"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Yeoman scaffold support < %= "),e("em",[this._v("variable")]),this._v(" > grammar to fill up dynamic content. And we can find out how to get "),e("em",[this._v("variable")]),this._v(" in following part.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"describe-how-to-generate-project"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#describe-how-to-generate-project","aria-hidden":"true"}},[this._v("#")]),this._v(" Describe How to Generate project")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",[e("li",[this._v("Ask question for user's input.")]),this._v(" "),e("li",[this._v("Run some customed scripts.")]),this._v(" "),e("li",[this._v("Render the project scaffold according to user's input and scripts. And put them in current directory.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The logic above is all written in "),e("code",[this._v("generators/app/index.js")]),this._v(". Generally, the file support this format:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Generator "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'yeoman-generator'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("extends")]),t._v(" Generator "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 初始化阶段")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initializing")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* code */")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 接收用户输入阶段")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("prompting")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* code */")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 保存配置信息和文件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("configuring")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* code */")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 执行自定义函数阶段")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* code */")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 生成项目目录阶段")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("writing")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* code */")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 统一处理冲突，如要生成的文件已经存在是否覆盖等处理")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("conflicts")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* code */")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 安装依赖阶段")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* code */")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 结束阶段")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* code */")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Yeoman provide a basic class of "),e("code",[this._v("Generator")]),this._v(". We can extend our own generator based on it. "),e("code",[this._v("Generator")]),this._v(" defines 8 life cycles. They will run as the sequence showed in code below.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"debug"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#debug","aria-hidden":"true"}},[this._v("#")]),this._v(" Debug")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("cd <your-path>/generator-startkit-demo\nnpm link\ncd ~/.feflow\nnpm link generator-startkit-demo\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("Then we can edit "),s("code",[t._v("~/.feflow/package.json")]),t._v(" (we can use "),s("code",[t._v("vi ~/.feflow/pakcage.json")]),t._v(" to edit it). In "),s("code",[t._v("dependencies")]),t._v(" we add "),s("code",[t._v('"generator-startkit-demo": "1.0.0"')]),t._v("(it can be any version). This is for help Feflow find your generator.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Now, you can run "),e("code",[this._v("feflow init")]),this._v(" in any place you want to create your project. You will find that your generator is listed. Select it then we can generate our project.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("The source code of "),e("code",[this._v("generator-feflow-example")]),this._v(" is here: https://github.com/feflow/generator-feflow-example")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"advanced-solution"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#advanced-solution","aria-hidden":"true"}},[this._v("#")]),this._v(" Advanced Solution")])}],!1,null,null,null);e.default=n.exports}}]);